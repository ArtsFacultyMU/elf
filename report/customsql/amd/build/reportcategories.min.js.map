{"version":3,"sources":["../src/reportcategories.js"],"names":["define","$","t","init","on","expandCollapse","expandCollapseAll","updateExpandCollapseAll","e","catwrapper","target","closest","length","hasClass","removeClass","addClass","preventDefault","link","text","data"],"mappings":"AA0BAA,OAAM,qCAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAI3B,GAAIC,CAAAA,CAAC,CAAG,CAKJC,IAAI,CAAE,eAAW,CACbF,CAAC,CAAC,MAAD,CAAD,CAAUG,EAAV,CAAa,OAAb,CAAsB,mBAAtB,CAA2CF,CAAC,CAACG,cAA7C,EACAJ,CAAC,CAAC,yBAAD,CAAD,CAA6BG,EAA7B,CAAgC,OAAhC,CAAyCF,CAAC,CAACI,iBAA3C,EACAJ,CAAC,CAACK,uBAAF,EACH,CATG,CAgBJF,cAAc,CAAE,wBAASG,CAAT,CAAY,CACxB,GAAIC,CAAAA,CAAU,CAAGR,CAAC,CAACO,CAAC,CAACE,MAAH,CAAD,CAAYC,OAAZ,CAAoB,gBAApB,CAAjB,CACA,GAAIF,CAAU,CAACG,MAAf,CAAuB,CACnB,GAAIH,CAAU,CAACI,QAAX,CAAoB,qBAApB,CAAJ,CAAgD,CAC5CJ,CAAU,CAACK,WAAX,CAAuB,qBAAvB,EAA8CC,QAA9C,CAAuD,oBAAvD,CACH,CAFD,IAEO,CACHN,CAAU,CAACK,WAAX,CAAuB,oBAAvB,EAA6CC,QAA7C,CAAsD,qBAAtD,CACH,CACDP,CAAC,CAACQ,cAAF,GACAd,CAAC,CAACK,uBAAF,EACH,CACJ,CA3BG,CAkCJD,iBAAiB,CAAE,2BAASE,CAAT,CAAY,CAC3B,GAAwC,CAApC,GAAAP,CAAC,CAAC,qBAAD,CAAD,CAAyBW,MAA7B,CAA2C,CAEvCX,CAAC,CAAC,gBAAD,CAAD,CAAoBa,WAApB,CAAgC,qBAAhC,EACAb,CAAC,CAAC,gBAAD,CAAD,CAAoBc,QAApB,CAA6B,oBAA7B,CACH,CAJD,IAIO,CAEHd,CAAC,CAAC,gBAAD,CAAD,CAAoBa,WAApB,CAAgC,oBAAhC,EACAb,CAAC,CAAC,gBAAD,CAAD,CAAoBc,QAApB,CAA6B,qBAA7B,CACH,CACDP,CAAC,CAACQ,cAAF,GACAd,CAAC,CAACK,uBAAF,EACH,CA9CG,CAoDJA,uBAAuB,CAAE,kCAAW,CAChC,GAAIU,CAAAA,CAAI,CAAGhB,CAAC,CAAC,yBAAD,CAAZ,CACA,GAAwC,CAApC,GAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBW,MAA7B,CAA2C,CAEvCK,CAAI,CAACC,IAAL,CAAUD,CAAI,CAACE,IAAL,CAAU,eAAV,CAAV,CACH,CAHD,IAGO,CAEHF,CAAI,CAACC,IAAL,CAAUD,CAAI,CAACE,IAAL,CAAU,iBAAV,CAAV,CACH,CACJ,CA7DG,CAAR,CAgEA,MAAOjB,CAAAA,CACV,CArEK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * JavaScript to expand/collapse sections.\n *\n * @package report_customsql\n * @copyright 2014 The Open University\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module report_customsql/reportcategories\n */\ndefine(['jquery'], function($) {\n    /**\n     * @alias module:report_customsql/reportcategories\n     */\n    var t = {\n\n        /**\n         * Initialise the tabs.\n         */\n        init: function() {\n            $('body').on('click', '.csql_category h2', t.expandCollapse);\n            $('.csql_expandcollapseall').on('click', t.expandCollapseAll);\n            t.updateExpandCollapseAll();\n        },\n\n        /**\n         * Event handler for expanding or collapsing one section.\n         *\n         * @param {Event} e DOM event.\n         */\n        expandCollapse: function(e) {\n            var catwrapper = $(e.target).closest('.csql_category');\n            if (catwrapper.length) {\n                if (catwrapper.hasClass('csql_categoryhidden')) {\n                    catwrapper.removeClass('csql_categoryhidden').addClass('csql_categoryshown');\n                } else {\n                    catwrapper.removeClass('csql_categoryshown').addClass('csql_categoryhidden');\n                }\n                e.preventDefault();\n                t.updateExpandCollapseAll();\n            }\n        },\n\n        /**\n         * Event handler for expanding or collapsing one section.\n         *\n         * @param {Event} DOM event.\n         */\n        expandCollapseAll: function(e) {\n            if ($('.csql_categoryshown').length === 0) {\n                // All categories collapsed, do expand all.\n                $('.csql_category').removeClass('csql_categoryhidden');\n                $('.csql_category').addClass('csql_categoryshown');\n            } else {\n                // All Some categories open, do collapse all.\n                $('.csql_category').removeClass('csql_categoryshown');\n                $('.csql_category').addClass('csql_categoryhidden');\n            }\n            e.preventDefault();\n            t.updateExpandCollapseAll();\n        },\n\n        /**\n         * Update the text of the expand/collpase all link, based\n         * on whether any sections are open.\n         */\n        updateExpandCollapseAll: function() {\n            var link = $('.csql_expandcollapseall');\n            if ($('.csql_categoryshown').length === 0) {\n                // All categories collapsed, link should expand all.\n                link.text(link.data('expandalltext'));\n            } else {\n                // All Some categories open, link should collapse all.\n                link.text(link.data('collapsealltext'));\n            }\n        }\n    };\n\n    return t;\n});\n"],"file":"reportcategories.min.js"}