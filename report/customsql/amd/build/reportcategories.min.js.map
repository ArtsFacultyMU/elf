{"version":3,"file":"reportcategories.min.js","sources":["../src/reportcategories.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * JavaScript to expand/collapse sections.\n *\n * @package report_customsql\n * @copyright 2014 The Open University\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module report_customsql/reportcategories\n */\ndefine(['jquery'], function($) {\n    /**\n     * @alias module:report_customsql/reportcategories\n     */\n    var t = {\n\n        /**\n         * Initialise the tabs.\n         */\n        init: function() {\n            $('body').on('click', '.csql_category h2 .categoryname, .csql_category h2 .reportcounts', t.expandCollapse);\n            $('.csql_expandcollapseall').on('click', t.expandCollapseAll);\n            t.updateExpandCollapseAll();\n        },\n\n        /**\n         * Event handler for expanding or collapsing one section.\n         *\n         * @param {Event} e DOM event.\n         */\n        expandCollapse: function(e) {\n            var catwrapper = $(e.target).closest('.csql_category');\n            if (catwrapper.length) {\n                if (catwrapper.hasClass('csql_categoryhidden')) {\n                    catwrapper.removeClass('csql_categoryhidden').addClass('csql_categoryshown');\n                } else {\n                    catwrapper.removeClass('csql_categoryshown').addClass('csql_categoryhidden');\n                }\n                e.preventDefault();\n                t.updateExpandCollapseAll();\n            }\n        },\n\n        /**\n         * Event handler for expanding or collapsing one section.\n         *\n         * @param {Event} e DOM event.\n         */\n        expandCollapseAll: function(e) {\n            if ($('.csql_categoryshown').length === 0) {\n                // All categories collapsed, do expand all.\n                $('.csql_category').removeClass('csql_categoryhidden');\n                $('.csql_category').addClass('csql_categoryshown');\n            } else {\n                // All Some categories open, do collapse all.\n                $('.csql_category').removeClass('csql_categoryshown');\n                $('.csql_category').addClass('csql_categoryhidden');\n            }\n            e.preventDefault();\n            t.updateExpandCollapseAll();\n        },\n\n        /**\n         * Update the text of the expand/collpase all link, based\n         * on whether any sections are open.\n         */\n        updateExpandCollapseAll: function() {\n            var link = $('.csql_expandcollapseall');\n            if ($('.csql_categoryshown').length === 0) {\n                // All categories collapsed, link should expand all.\n                link.text(link.data('expandalltext'));\n            } else {\n                // All Some categories open, link should collapse all.\n                link.text(link.data('collapsealltext'));\n            }\n        }\n    };\n\n    return t;\n});\n"],"names":["define","$","t","init","on","expandCollapse","expandCollapseAll","updateExpandCollapseAll","e","catwrapper","target","closest","length","hasClass","removeClass","addClass","preventDefault","link","text","data"],"mappings":";;;;;;;AA0BAA,2CAAO,CAAC,WAAW,SAASC,OAIpBC,EAAI,CAKJC,KAAM,WACFF,EAAE,QAAQG,GAAG,QAAS,mEAAoEF,EAAEG,gBAC5FJ,EAAE,2BAA2BG,GAAG,QAASF,EAAEI,mBAC3CJ,EAAEK,2BAQNF,eAAgB,SAASG,OACjBC,WAAaR,EAAEO,EAAEE,QAAQC,QAAQ,kBACjCF,WAAWG,SACPH,WAAWI,SAAS,uBACpBJ,WAAWK,YAAY,uBAAuBC,SAAS,sBAEvDN,WAAWK,YAAY,sBAAsBC,SAAS,uBAE1DP,EAAEQ,iBACFd,EAAEK,4BASVD,kBAAmB,SAASE,GACgB,IAApCP,EAAE,uBAAuBW,QAEzBX,EAAE,kBAAkBa,YAAY,uBAChCb,EAAE,kBAAkBc,SAAS,wBAG7Bd,EAAE,kBAAkBa,YAAY,sBAChCb,EAAE,kBAAkBc,SAAS,wBAEjCP,EAAEQ,iBACFd,EAAEK,2BAONA,wBAAyB,eACjBU,KAAOhB,EAAE,2BAC2B,IAApCA,EAAE,uBAAuBW,OAEzBK,KAAKC,KAAKD,KAAKE,KAAK,kBAGpBF,KAAKC,KAAKD,KAAKE,KAAK,6BAKzBjB"}