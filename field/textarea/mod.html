<form name="fieldsubform" action="<?php echo $CFG->wwwroot; ?>/mod/data/fields.php?d=<?php echo ($field->dataid); ?>" method="POST">
<table width="100%">
    <tr>
        <td span="2">
            <input type="hidden" name="fid" value="<?php echo ($field->id); ?>" />
            <input type="hidden" name="mode" value="<?php if ($newfield) {echo 'add';} else {echo 'update';} ?>" />
            <input type="hidden" name="type" value="<?php echo $this->type; ?>" />
            <input name="sesskey" value="<?php echo sesskey(); ?>" type="hidden">
            <?php echo ($this->name()); ?>
        </td>
    </tr>
    <tr>
        <td>Name:</td>
        <td><input type="text" name="name" id="name" value="<?php echo($field->name); ?>" /></td>
    </tr>
    <tr>
        <td>Description:</td>
        <td><input type="text" name="description" id="description" value="<?php echo($field->description); ?>" /></td>
    </tr>
    <tr>
        <td>Allow Autolink:</td>
        <td><input type="checkbox" name="param1" id="param1" <?php if($field->param1) {echo 'checked="checked"';} ?> value="1" /></td>
    </tr>
    <tr>
        <td>Width:</td>
        <td><input type="text" name="param2" id="width" value="<?php echo($field->param2); ?>" /> px</td>
    </tr>
    <tr>
        <td>Height:</td>
        <td><input type="text" name="param3" id="height" value="<?php echo($field->param3); ?>" /> px</td>
    </tr>
    <tr>
        <td valign="top">Allowed Formats:</td>
        <td>
            <?php
                $savedFormats = explode(',', $field->param4);
                
                foreach (format_text_menu() as $key=>$format) {
                    if (array_search($key, $savedFormats) !== false) {
                        print_checkbox("param4[]", $key, true, $format);
                    }
                    else {
                        print_checkbox("param4[]", $key, false, $format);
                    }
                    echo '<br />';
                }
            ?>
        </td>
    </tr>

    <tr>
        <td>&nbsp;</td>
        <td>
            <input type="submit" value="<?php if ($newfield) {echo get_string('add');} else {echo get_string('save','data');} ?>" \>
            <input type="submit" value="<?php echo get_string('cancel'); ?>" onclick="document.fieldsubform.mode.value='void';" \>
        </td>
    </tr>
</table>
</form>
